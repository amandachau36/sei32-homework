<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="images/icon.ico">
    <title>Yukihiro Matsumoto</title>
  </head>


  <body>
    <audio controls autoplay>
      <source src="media/ted.mp3" type="audio/mpeg">Your browser does not support the <code>audio</code>element.</audio>

    <form>
      What is MINASWAN?<br>
      <input type="text" name="password"><br>
    </form>

    <a href="index.html">
      <img id="welcomeRuby" src="images/logo.png">
    </a>

    <div id="japanese">
      <pre id="hisName">
        ま
          つ
            も
              と
              ゆ
              き
              ひ
              ろ

        ま
        つ  ま
        も     つ
        と     ろ
        ゆ
        き
        ひ


      </pre>

      <pre id="preciousRuby">
                      ル
                    ビ
                  ー
                は
                貴
                重
                で
                す

                      ル
                  ル   ビ
                ビ     ー
                す     は
                      貴
                      重
                      で




      </pre>
    </div>

    <div id = "words">
          プログラミング言語サバイバル
    まつもとゆきひろ氏（以下、まつもと）：どうもこんにちは、まつもとと申します。今日は「プログラミング言語サバイバル」というタイトルでお話をしようと思います。

    今年は、2月にイベントをやりましたが、Rubyの開発を始めてからちょうど25年ということで「思えば遠くに来たもんだ」という感じです。もう人生の半分くらいはRubyを作ってる（笑）。

    これで興味があるところは「プログラミング言語の寿命って、いったいどのぐらいあるんだろう？」ということを考えるわけです。だいたい、ソフトウェアの寿命ってそんなに長くないんですね。だんだんバージョンが上がっていって、5年とか10年で使えなくなるのが一般的だと思います。考えてみたら、10年前にはなかったソフトウェアが、すごくたくさんある。

    プログラミング言語は、そういう一般的なソフトウェアに比べると、ソフトウェアとしての寿命は比較的長いほうではないかなと思います。

    例えば、FORTRANという、一応世界で最初のプログラミング言語と言われているものが1954年に生まれているので、もう今年で64年経つわけです。あるいは、COBOLは1959年ぐらいなので、もうすぐ60年ぐらい。

    最近はFORTRANとかCOBOLとかの記事をあまり読まなくなりましたけど、世の中からFORTRANやCOBOLが消えてなくなったかというとそうではなくて、ジャンルによっては今も使われて生き残っている。

    フィルターバブルっていうんですか。自分の知ってる世界と違う世界のことが、だんだん見えなくなってきてるんですよね。Twitterみたいなネットメディアでお話ししてると、そこに参加してる人から届くものだけが見えるので、そこから外れたものが世の中からなくなったような気がするんです。

    今言ったようなFORTRANとかCOBOLは、そういう（ものを扱っている）コミュニティに近づくと「あっ、実はあるんだ!?」みたいな話になります。

    私が所属してる会社で、松江（市）にネットワーク応用通信研究所という会社があるんですけど、そこのエンジニアも何分の1かがCOBOL技術者です。

    レセプトのソフトを作ってるんですが、医療関係で元オフコンみたいなシステムではわりとCOBOLが生き残っておりまして、保険の点数の計算のロジックなんかは、まだCOBOLでやってる人たちがいる。そういうふうにいうと、みなさんの知らない世界でCOBOLはまだ元気に動き続けているわけです。

    例えば金融機関とか、あるいは大企業の中のシステムとかには、メインフレーム＋COBOLみたいなものが意外と残っていたりする。知らないだけなんです。

    とはいうものの、死んだように見えるという点では、何十年か前に一世を風靡した「プログラミング言語といえばFORTRAN」みたいな雰囲気とか、あるいは大学でプログラミング実習といえばFORTRANという時代もあったわけですけど、そういう空気はもうなくなっている。

    大学生が「プログラミングを勉強します」というときに出てくる言語がFORTRANであることはもうなくて、JavaだったりCだったり、あるいはRubyとかPythonを使うところも増えてますね。そういう、ファーストチョイスにならないという意味では、旧世代の言語というか、しばらく前の言語の凋落は明らかです。FORTRANとかCOBOLの絶頂は30年とか40年前で、今やだんだん凋落している言語であると。

    我々のテーマは「Ruby3x3」といって、だいたい2年後ぐらいの登場を期待されている「Ruby3」というバージョンを開発中なんですけど、そのバージョンではRuby2.0と比較して、さまざまな各種ベンチマークで3倍のスピードを出すことをやってみようと、高いチャレンジを持ってやっています。3倍速くするんですね。

    でも、言うのは易しいんですが、実現はなかなか難しい。さまざまなボトルネックが存在していて、それらを解消するためにさまざまな努力をしています。

    具体的に言うと、Rubyのプログラムが遅いと言われたときに、1つの理由だけで遅いことは滅多にありません。

    あるアプリケーションはCPUをたくさん使いすぎていて、CPUのパフォーマンス、CPUの性能そのものがボトルネックになっている。あるいは、メモリがボトルネックになっているアプリケーションも意外と多い。それから、I/Oがボトルネックになっているものもあります。それぞれのボトルネックに対して、個別に違う対処法が必要になってきます。

    例えばCPUがボトルネックになっている場合は、そのVMの性能が問題になっている。つまり、ネイティブコードにコンパイルされたものに比べて、バーチャルマシンで実行するものはだいたい抽象化のレイヤーが1段上がっているので、抽象化のレイヤーを1枚かぶせるために、概算でいうと10〜100倍遅くなるんですね。

    そうすると、もしRubyのプログラムをネイティブコードにコンパイルできれば、うまくすると今のバーチャルマシンを介した実行より10倍速くなる可能性があるわけです

    そこで、今はRubyのプログラムをバーチャルマシンのコードに変換して実行しているんですが、それをさらに実行時にネイティブコードに変換すれば、もしかすると10倍とか速くできるかもしれない。そういう余地がある。

    実際に、JITコンパイラ、Just-In-Timeコンパイラということで、実行時にRubyのプログラムをコンパイルするものを開発中です。12月25日にRuby2.6というバージョンをリリースする予定があって、今日が14日なのであと10日ほどでリリースされるんですけど、そのバージョンには、最初のバージョンのJITコンパイラが使われます。

    ある種のCPUがボトルネックになっているベンチマークでは、3倍近くの高速化が観測されています。ただ、CPUがボトルネックになっていないソフトウェアはまったく速くならないので、そこは気をつけないといけない。魔法のようになんでも3倍速くなるといんですけれども、現実はなかなか甘くないですね。
    </div>

    <script src="js/jquery-3.4.1.js"></script>
    <script src="js/main.js"></script>

  </body>

  <footer>
  </footer>

</html>
